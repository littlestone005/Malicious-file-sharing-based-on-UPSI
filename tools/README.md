# 系统工具使用说明

## 数据库初始化工具 (init_db.py)

这个工具用于重置数据库到初始状态，主要功能是清理演示环境中的测试用户账号，保留基本用户。

### 使用方法

```bash
# 基本使用方式（保留数据库文件结构，重置用户和恶意软件数据）
python tools/init_db.py

# 强制重建数据库（删除现有数据库文件，重新创建所有数据）
python tools/init_db.py --force

# 保留扫描记录数据（只重置用户和恶意软件数据）
python tools/init_db.py --keep-data
```

### 重要提示

1. 执行数据库重置后，需要**重启后端服务**才能生效，否则可能出现无法登录等问题。

2. 默认保留的账号：
   - 管理员：用户名 `admin`，密码 `admin`
   - 测试用户：用户名 `testuser`，密码 `test123`

### 登录问题解决方法

如果重置数据库后出现无法登录的问题（显示"无法连接服务器"或验证失败），请按照以下步骤操作：

1. 关闭当前运行的后端服务（如果有）
2. 打开命令提示符或PowerShell，进入项目根目录
3. 运行以下命令启动后端服务：

```bash
python -m backend.main
```

4. 启动前端服务（如果尚未运行）：

```bash
cd frontend
npm run dev
```

5. 使用系统默认账号重新登录：
   - 用户名：`admin`
   - 密码：`admin`

### 疑难解答

如果以上方法仍无法解决问题，请尝试：

1. 彻底清除数据库：
```bash
python tools/init_db.py --force
```

2. 确认后端服务已完全关闭（使用任务管理器结束所有Python进程）

3. 重新启动后端服务和前端服务 